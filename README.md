<div align="center">
  <br>
  <h1><b>Oops... Project not ready!</b></h1>
  <strong>This is still a work in progress</strong>
  <strong>Please come back later!</strong>
</div>
<br>
<br>
<hr>
<hr>
<div align="center">
  <p><b>...</b></p>
</div>
<hr>
<hr>
<br>
<div align="center">
  <br>
  <h2><b>Project brainstorming bellow</b></h2>
  <strong>Warning: messy read.me ahead...</strong>
</div>
<br>
<hr>
<hr>
<br>

# secure_register_and_login_python
Flask-React software template for secure registration and login of users.

### Feature table:


<table style="border-collapse:separate;">
    <tr>
    <th style="background: #344955; border-radius:20px; border: 5px solid transparent"><small><b>Feature</b></small></th>
    <th style="background: #344955; border-radius:20px"><small><b>Functionality</b></small></th>
    <th style="background: #344955; border-radius:20px"><small><b>Status</b></small></th>
    <th style="background: #344955; border-radius:20px"><small><b>Notes</b></small></th>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent"><small><b>Website pages</b></small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>Page: Home</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>small adjustments needed</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>Page: Contact</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small> ↪ contact form</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>Page: User Dashboard</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center; color: red;"><small>✘</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>placeholder only</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>Page: Admin Dashboard</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center; color: red;"><small>✘</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>mostly placeholder</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>Page: Error</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent"><small><b>User actions</b></small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>sign up</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>log in</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
   <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>log out</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>log out</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent"><small><b>Admin actions</b></small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>⤵</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>users overview (table)</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>view user info</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>view user activity logs</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>test again</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>view user messages</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center; color: red;"><small>✘</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>only placeholder page</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>delete user</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>make sure admins cant be deleted</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>block user</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>make sure admins cant be blocked</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>make user admin</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>flag user</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small>-</small></td>
  </tr>
  <tr>
    <td style="background: #344955; border-radius:20px; border: 5px solid transparent; text-align: center">↪</td>
    <td style="background: #344955; border-radius:20px"><small>messages</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center;"><small>✔</small></td>
    <td style="background: #344955; border-radius:20px; text-align: center"><small></small></td>
  </tr>
</table>

### Todo:
→ BE: Unit Testing<br>
→ Messages table - pagination and filter improvement<br>
→ FE: Api handlers substitute returning object by returning promise<br>
→ BE: Cleaning up and improving Config files<br>
→ User should be able to change email<br>

### Conventions & stuff to keep in mind while developing:
→ Seed: Seeding in the context of web development and databases refers to the process of populating a database with initial data. Used for initial setup, make testing easier, and demo purposes<br>
→ User Roles: e.g., "admin," "user," "guest."<br>
→ worker.py file: comonly used for background tasks such as backups, cleanups, notifications, sumarizing logs 

check out:
https://github.com/realpython/flask-by-example/blob/master/config.py


## Design and other useful links for inspiration:

Design for inspiration: https://en.99designs.ch/profiles/kukuhaldy/designs/1290791

## How this template attempts to comply with OWASP top 10

Link: https://wiki.owasp.org/index.php/Top_10_2013-Top_10

Cloudflare article about OWAST top 10:
https://www.cloudflare.com/en-gb/learning/security/threats/owasp-top-10/

### 1. Injection
Injection attacks can be prevented by validating and/or sanitizing user-submitted data. SQL injection attack prevention includes sanitizing string inputs.

To check for type and length of value JSON Schema is being used. No raw SQL queries were performed, and SQLAlchemy was chosen as an ORM that offers some protection against SQL injections (SQLAlchemy parametizes input data under the hood).

Example:

```python 
name = json_data["name"]
user_exists = User.query.filter_by(_email=email).first() is not None
```

The filter_by method should automatically escape and sanitize the input. 

Sources to check out:
https://www.educative.io/answers/how-to-sanitize-user-input-in-python (html escaping)
https://www.scaler.com/topics/escape-string-python/

"Bleach is an allowed-list-based HTML sanitizing library that escapes or strips markup and attributes."
bleach: https://pypi.org/project/bleach/



### 2. Broken authentication
Implemented:
- rate-limiting

not implemented:
-two-factor auth

### 3. Sensitive data exposure
Implemented:
- encryption of password
- no feedback given when log-in fails, or password reset (should not be possible for FE to see whether user is actually registered)

### 4. XSS Cross-site scripting
.... not allowing users to post links?
sanitizing user input..

### 5. Missing Function Level access control
Checking access rights in BE function and not only FE.

### 6. Security logging and monitoring failures
Logging of key actions:
- auditable events: logins, failed logins
- warnings and errors
Monitoring for suspiscious activity:
- flagging user with multiple attempted logins..?
- unusual traffic...? odd traffic origin..?
- allow user reporting of unusual behaviour...?
- appropriate alerting threshholds...?

Check the following:
"Penetration testing and scans by dynamic application security testing (DAST) tools (such as OWASP ZAP) do not trigger alerts.

The application cannot detect, escalate, or alert for active attacks in real-time or near real-time."
Source: https://owasp.org/Top10/A09_2021-Security_Logging_and_Monitoring_Failures/
How to use ZAP: https://www.youtube.com/watch?v=QJ5u_dHwoAk

## Other safety or best practices features
### 1. Battling bot traffic
Abusive bots can slow down a website and higher hosting costs by consuming server badwidth and resources. 
What was implemented:
- Honey trap

What was not implemented, but could help here as well:
- CAPTCHA

## Check out: useful links

Python security best practices:
check-sheet: https://go.snyk.io/rs/677-THP-415/images/Python_Cheatsheet_whitepaper.pdf

Code checker:
https://snyk.io/plans/




implementing session:
https://www.youtube.com/watch?v=sBw0O5YTT4Q

testing in flask:
https://www.youtube.com/watch?v=RLKW7ZMJOf4&t=184s

CORS and access control:
https://stackoverflow.com/a/24689738

Third-party cookies and local host issue:
https://web.dev/articles/how-to-use-local-https

tips:
vs code shortcuts and "Keyboard reference sheet" available at https://code.visualstudio.com/docs/getstarted/tips-and-tricks